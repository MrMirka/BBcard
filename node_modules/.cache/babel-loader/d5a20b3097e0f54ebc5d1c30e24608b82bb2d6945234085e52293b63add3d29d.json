{"ast":null,"code":"/* eslint-disable */import{AmbientLight,Group,PerspectiveCamera,PointLight,Scene,TextureLoader,WebGLRenderer}from'three';import{GLTFLoader}from'three/examples/jsm/loaders/GLTFLoader';import{gsap}from'gsap';import{Draggable}from'gsap/Draggable';import{InertiaPlugin}from'./libs/InertiaPlugin';import{CustomEase}from'gsap/CustomEase';import{generateStars}from'./stars/Stars';import modelSource from'./models/model.glb';import modelMapSource from'./models/albedo.jpg';import modelNormalMapSource from'./models/normals.jpg';import flashSource from'./flash/flash.png';import cardBackSource from'./models/card.jpg';import{getFlash}from'./flash/flash';import{getCard}from'./card/card';import{getModel}from'./models/model';gsap.registerPlugin(Draggable,InertiaPlugin,CustomEase);export const RESOLUTION=window.devicePixelRatio||1;export let CardInstanceState=/*#__PURE__*/function(CardInstanceState){CardInstanceState[CardInstanceState[\"not-loaded\"]=0]=\"not-loaded\";CardInstanceState[CardInstanceState[\"loaded\"]=1]=\"loaded\";CardInstanceState[CardInstanceState[\"start-animation-ended\"]=2]=\"start-animation-ended\";CardInstanceState[CardInstanceState[\"drag-ended\"]=3]=\"drag-ended\";CardInstanceState[CardInstanceState[\"end-animation-started\"]=4]=\"end-animation-started\";CardInstanceState[CardInstanceState[\"end-animation-ended\"]=5]=\"end-animation-ended\";return CardInstanceState;}({});export class CardBoxInstance{constructor(container,cover){this._state=0;this._isLoaded=false;this._isComplete=false;this._isDestroyed=false;this._vw=1;this._vh=1;this._x=1;this._pos={x:0,y:0};this._animation={// handPosX:\n};this._container=void 0;this._hand=void 0;this._onStateChange=()=>{};this._renderer=void 0;this._scene=new Scene();this._globalGroup=new Group();this._camera=void 0;this._model=void 0;this._card=void 0;this._flash=void 0;this._stars=void 0;// private readonly _clock = new Clock();\nthis._draggable=void 0;this._onResize=()=>this._resize();this._tickHandler=()=>this._tick();// private readonly _onMove = (e: MouseEvent) => this._move(e);\nthis._raf=-1;this._container=container;this._renderer=new WebGLRenderer({alpha:true,antialias:true,logarithmicDepthBuffer:true});this._container.appendChild(this._renderer.domElement);this._hand=this._createHand();this._renderer.setPixelRatio(RESOLUTION);this._scene.add(this._globalGroup);this._globalGroup.position.z=-10;this._globalGroup.position.y=-0.03;this._globalGroup.rotation.y=-Math.PI*3;this._camera=new PerspectiveCamera(60,1,0.01,200000);this._createLights();this._draggable=this._createDrag(container);this._resize();// window.addEventListener('mousemove', this._onMove);\nwindow.addEventListener('resize',this._onResize);this._load(cover).then(()=>{if(this._isDestroyed)return;this._resize();this._raf=requestAnimationFrame(this._tickHandler);this._changeState(1);}).then(()=>this._animateStart());}_changeState(state){this._state=state;this._onStateChange(state);}_animateStart(){const tl=gsap.timeline();tl.to(this._globalGroup.position,{z:-1,y:-0.03,duration:2,ease:'power4.out'},0.1);tl.to(this._globalGroup.rotation,{y:0,duration:2.2,ease:'expo.out'},0.1);tl.to(this._hand.inner,{x:0,y:0,opacity:1,ease:'expo.out',duration:1},'-=1');tl.add(()=>{this._draggable.enable();},1.5);tl.add(()=>{this._changeState(2);});}_animateDragEnd(){var _top;if(this._state>=3)return;this._draggable.disable();(_top=this._model.top)===null||_top===void 0?void 0:_top.removeFromParent();this._changeState(3);const tl=gsap.timeline();tl.to(this._model.animation.position,{y:-2,x:0.1,duration:1.5,overwrite:true,ease:'power4.inOut'},0);tl.to(this._model.animation.rotation,{z:Math.PI/4,duration:2,overwrite:true,ease:'expo.inOut'},0);tl.to(this._hand.inner,{x:-5,y:50,overwrite:true,ease:'power4.inOut',duration:1.3},0);tl.to(this._hand.inner,{opacity:0,duration:1,overwrite:true,ease:'power4.inOut'},0);// tl.to(this._card!.rotation.rotation, {\n//   z: Math.PI / 36,\n//   duration: 1,\n//   ease: 'power4.inOut'\n// }, 0.2);\n// tl.to(this._card!.rotation.rotation, {\n//   y: 0,\n//   duration: 1,\n//   ease: 'power4.inOut'\n// }, 0.3);\ntl.to(this._card.rotation.rotation,{z:0,y:0,duration:1,overwrite:true,ease:'power4.inOut'},0.5);tl.to(this._card.animation.scale,{x:1.4,y:1.4,z:1.4,duration:1,overwrite:true,ease:\"power4.inOut\"},0.4);tl.to(this._card.animation.position,{y:0.1,duration:1,overwrite:true,ease:\"power4.inOut\"},0.4);// flash\ntl.to(this._flash.material,{opacity:1,duration:1,ease:\"power4.inOut\"},0);tl.to(this._flash.mesh.position,{y:0.5,duration:1.2,ease:\"power4.inOut\"},0);tl.to(this._flash.material,{opacity:0,duration:1,ease:\"power4.inOut\"},1.5);tl.to(this._flash.mesh.position,{y:-2,duration:1,ease:\"power4.inOut\"},1.5);// stars\ntl.to(this._stars.material.uniforms.u_position,{value:1.2,duration:3,ease:CustomEase.create(\"custom\",\"M0,0 C0.116,0.42 0.074,0.778 0.18,0.89 0.273,0.988 0.818,1.001 1,1 \")},0.5);tl.to(this._stars.material.uniforms.u_opacity,{value:0.4,duration:0.5,ease:'power4.out'},0.5);tl.to(this._stars.material.uniforms.u_opacity,{value:0,duration:1,ease:'power4.in'},1.2);tl.to(this._card.animation.rotation,{y:Math.PI*2,duration:1,overwrite:true,ease:'power4.out'},2);tl.to(this._card.animation.scale,{x:3,y:3,z:3,duration:1,ease:'power4.out',onStart:()=>this._changeState(4)},3);tl.to(this._container,{opacity:0,duration:1,ease:'power4.out'},3);tl.add(()=>this._changeState(5));}destroy(){this._isDestroyed=true;this._draggable.kill();this._container.removeChild(this._renderer.domElement);this._container.removeChild(this._hand.el);cancelAnimationFrame(this._raf);// window.removeEventListener('mousemove', this._onMove);\nwindow.removeEventListener('resize',this._onResize);}set onStateChange(func){this._onStateChange=func||(()=>{});// if (this._isLoaded && func) func();\n}_createHand(){const el=document.createElement('div');el.classList.add('card-box-hand');const inner=document.createElement('div');el.appendChild(inner);inner.classList.add('card-box-hand-inner');gsap.set(inner,{y:50,x:10,opacity:0});this._container.appendChild(el);return{el,inner};}_createDrag(container){const draggable=Draggable.create(document.createElement('div'),{type:'x',trigger:container,inertia:true,edgeResistance:0.8,dragResistance:0.5,// velocity: 10000000,\nresistance:10000000,snap:{x:value=>{if(value<this._x*0.2){return 0;}else{return this._x;}}},onDrag:()=>this._onDrag(this._draggable.x),onThrowUpdate:()=>this._onDrag(this._draggable.x)})[0];draggable.disable();return draggable;}_createLights(){const ambient=new AmbientLight(0xFF7373,0.3);const point=new PointLight(0xD0FFFF,2.5,32,1.2);point.position.set(10,5,15);const point2=new PointLight(0xD0FFFF,2,13,2);point2.position.set(6,0,10);this._scene.add(ambient,point,point2);return{ambient,point};}async _load(cover){const mLoader=new GLTFLoader();const tLoader=new TextureLoader();const[map,normalMap,model,flashMap,cardBackMap,cardFrontMap]=await Promise.all([tLoader.loadAsync(modelMapSource),tLoader.loadAsync(modelNormalMapSource),mLoader.loadAsync(modelSource),tLoader.loadAsync(flashSource),tLoader.loadAsync(cardBackSource),tLoader.loadAsync(cover)]);if(this._isDestroyed)return;// model\nthis._model=getModel(model,map,normalMap);// flash\nthis._flash=getFlash(flashMap);// stars\nthis._stars=generateStars();// card\nthis._card=getCard(cardBackMap,cardFrontMap);this._scene.add(this._flash.mesh,this._stars.group);this._globalGroup.add(this._model.animation,this._card.animation);this._isLoaded=true;}_resize(){this._vw=window.innerWidth;this._vh=window.innerHeight;const heightCoeff=this._vh/667;this._container.style.width=this._vw+'px';this._container.style.height=this._vh+'px';this._renderer.setSize(this._vw,this._vh);this._x=261*heightCoeff;this._draggable.applyBounds({minX:0,maxX:this._x});this._pos.y=-heightCoeff*90;this._pos.x=118*2*heightCoeff;this._camera.aspect=this._vw/this._vh;this._camera.updateProjectionMatrix();this._updateHandPos(0);}_tick(){this._renderer.render(this._scene,this._camera);// if (this._mixer) {\n//   this._mixer.update()\n// }\nthis._raf=requestAnimationFrame(this._tickHandler);}_onDrag(x){if(this._state>=3)return;const{clip,mixer,action,rotation:modelRotation}=this._model;const{rotation:cardRotation}=this._card;let coeff=x/this._x;let coeffDur=coeff;coeffDur=Math.min(coeffDur,0.99);coeffDur=Math.max(coeffDur,0);mixer.setTime(coeffDur*clip.duration);modelRotation.rotation.y=coeffDur*(Math.PI/12);cardRotation.rotation.y=coeffDur*(Math.PI/12);let coeffPos=coeff*2;coeffPos=Math.min(coeffPos,1);this._updateHandPos(coeffPos);if(coeffPos>=0.99){this._animateDragEnd();}}_updateHandPos(coeff){coeff=coeff-0.5;this._hand.el.style.transform=\"translate3d(\".concat(this._pos.x*coeff,\"px, \").concat(this._pos.y,\"px, 0) rotate(\").concat(coeff*15,\"deg)\");}// private _move(e: MouseEvent)  {\n//   const pos = (e.clientX - this._vw / 2) / this._vw;\n//\n//   this._globalGroup.rotation.y = Math.PI * pos * 2\n// }\n}","map":{"version":3,"names":["AmbientLight","Group","PerspectiveCamera","PointLight","Scene","TextureLoader","WebGLRenderer","GLTFLoader","gsap","Draggable","InertiaPlugin","CustomEase","generateStars","modelSource","modelMapSource","modelNormalMapSource","flashSource","cardBackSource","getFlash","getCard","getModel","registerPlugin","RESOLUTION","window","devicePixelRatio","CardInstanceState","CardBoxInstance","constructor","container","cover","_state","_isLoaded","_isComplete","_isDestroyed","_vw","_vh","_x","_pos","x","y","_animation","_container","_hand","_onStateChange","_renderer","_scene","_globalGroup","_camera","_model","_card","_flash","_stars","_draggable","_onResize","_resize","_tickHandler","_tick","_raf","alpha","antialias","logarithmicDepthBuffer","appendChild","domElement","_createHand","setPixelRatio","add","position","z","rotation","Math","PI","_createLights","_createDrag","addEventListener","_load","then","requestAnimationFrame","_changeState","_animateStart","state","tl","timeline","to","duration","ease","inner","opacity","enable","_animateDragEnd","_top","disable","top","removeFromParent","animation","overwrite","scale","material","mesh","uniforms","u_position","value","create","u_opacity","onStart","destroy","kill","removeChild","el","cancelAnimationFrame","removeEventListener","onStateChange","func","document","createElement","classList","set","draggable","type","trigger","inertia","edgeResistance","dragResistance","resistance","snap","onDrag","_onDrag","onThrowUpdate","ambient","point","point2","mLoader","tLoader","map","normalMap","model","flashMap","cardBackMap","cardFrontMap","Promise","all","loadAsync","group","innerWidth","innerHeight","heightCoeff","style","width","height","setSize","applyBounds","minX","maxX","aspect","updateProjectionMatrix","_updateHandPos","render","clip","mixer","action","modelRotation","cardRotation","coeff","coeffDur","min","max","setTime","coeffPos","transform","concat"],"sources":["/Users/fredgan/Documents/Projects/BetBoom/BBCard/src/CardBox/instance/CardBoxInstance.ts"],"sourcesContent":["/* eslint-disable */\nimport {\n  AmbientLight, AnimationAction, AnimationClip, AnimationMixer, BackSide,\n  Group, Mesh, MeshBasicMaterial, MeshPhongMaterial, MeshPhysicalMaterial,\n  PerspectiveCamera, PlaneGeometry, PointLight, Scene, Texture, TextureLoader,\n  Vector2, WebGLRenderer\n} from 'three';\nimport {GLTFLoader} from 'three/examples/jsm/loaders/GLTFLoader';\nimport {gsap} from 'gsap';\nimport {Draggable} from 'gsap/Draggable';\nimport {InertiaPlugin} from './libs/InertiaPlugin';\nimport {CustomEase} from 'gsap/CustomEase';\nimport {generateStars} from './stars/Stars';\nimport {RoundedCubeGeometry, RoundedPlaneGeometry} from './Rounded';\n\nimport modelSource from './models/model.glb';\nimport modelMapSource from './models/albedo.jpg';\nimport modelNormalMapSource from './models/normals.jpg';\nimport flashSource from './flash/flash.png';\nimport cardBackSource from './models/card.jpg';\nimport {getFlash} from './flash/flash';\nimport {getCard} from './card/card';\nimport {getModel} from './models/model';\n\ngsap.registerPlugin(Draggable, InertiaPlugin, CustomEase);\n\n\n\nexport const RESOLUTION = window.devicePixelRatio || 1;\n\nexport enum CardInstanceState {\n  'not-loaded',\n  'loaded',\n  'start-animation-ended',\n  'drag-ended',\n  'end-animation-started',\n  'end-animation-ended'\n}\nexport type EventHandler = (state: CardInstanceState) => void;\n\nexport class CardBoxInstance {\n  private _state = 0;\n\n  private _isLoaded = false;\n  private _isComplete = false;\n  private _isDestroyed = false;\n  private _vw = 1;\n  private _vh = 1;\n  private _x = 1;\n  private _pos = {\n    x: 0,\n    y: 0\n  }\n  private _animation = {\n    // handPosX:\n  }\n  private readonly _container: HTMLDivElement;\n  private readonly _hand: {\n    el: HTMLDivElement;\n    inner: HTMLDivElement;\n  };\n  private _onStateChange: EventHandler = () => {};\n\n  private readonly _renderer: WebGLRenderer;\n  private readonly _scene = new Scene();\n  private readonly _globalGroup = new Group();\n  private readonly _camera: PerspectiveCamera;\n  private _model?: ReturnType<typeof getModel>;\n  private _card?: ReturnType<typeof getCard>;\n  private _flash?: ReturnType<typeof getFlash>;\n  private _stars?: ReturnType<typeof generateStars>;\n  // private readonly _clock = new Clock();\n  private readonly _draggable: Draggable;\n\n  private readonly _onResize = () => this._resize();\n  private readonly _tickHandler = () => this._tick();\n  // private readonly _onMove = (e: MouseEvent) => this._move(e);\n\n  private _raf: ReturnType<typeof requestAnimationFrame> = -1;\n\n  constructor(container: HTMLDivElement, cover: string) {\n    this._container = container;\n\n    this._renderer = new WebGLRenderer({\n      alpha: true,\n      antialias: true,\n      logarithmicDepthBuffer: true\n    });\n    this._container.appendChild(this._renderer.domElement);\n    this._hand = this._createHand();\n    this._renderer.setPixelRatio(RESOLUTION);\n\n    this._scene.add(this._globalGroup);\n    this._globalGroup.position.z = -10;\n    this._globalGroup.position.y = -0.03;\n    this._globalGroup.rotation.y = -Math.PI * 3;\n\n    this._camera = new PerspectiveCamera(60, 1, 0.01, 200000);\n\n    this._createLights();\n\n    this._draggable = this._createDrag(container);\n\n    this._resize();\n    // window.addEventListener('mousemove', this._onMove);\n    window.addEventListener('resize', this._onResize);\n\n    this._load(cover)\n      .then(() => {\n        if (this._isDestroyed) return;\n\n        this._resize();\n        this._raf = requestAnimationFrame(this._tickHandler);\n        this._changeState(1);\n      })\n      .then(() => this._animateStart());\n  }\n\n  private _changeState(state: CardInstanceState) {\n    this._state = state;\n    this._onStateChange(state);\n  }\n\n\n  private _animateStart() {\n    const tl = gsap.timeline();\n\n    tl.to(this._globalGroup.position, {\n      z: -1,\n      y: -0.03,\n      duration: 2,\n      ease: 'power4.out'\n    }, 0.1);\n    tl.to(this._globalGroup.rotation, {\n      y: 0,\n      duration: 2.2,\n      ease: 'expo.out'\n    }, 0.1);\n\n    tl.to(this._hand.inner, {\n      x: 0,\n      y: 0,\n      opacity: 1,\n      ease: 'expo.out',\n      duration: 1\n    }, '-=1');\n\n    tl.add(() => {\n      this._draggable.enable();\n    }, 1.5);\n\n    tl.add(() => {\n      this._changeState(2)\n    })\n    \n  }\n  private _animateDragEnd() {\n    if (this._state >= 3) return;\n    this._draggable.disable();\n    this._model!.top?.removeFromParent();\n    this._changeState(3);\n\n    const tl = gsap.timeline();\n\n    tl.to(this._model!.animation.position, {\n      y: -2,\n      x: 0.1,\n      duration: 1.5,\n      overwrite: true,\n      ease: 'power4.inOut'\n    }, 0);\n    tl.to(this._model!.animation.rotation, {\n      z: Math.PI / 4,\n      duration: 2,\n      overwrite: true,\n      ease: 'expo.inOut'\n    }, 0);\n    tl.to(this._hand.inner, {\n      x: -5,\n      y: 50,\n      overwrite: true,\n      ease: 'power4.inOut',\n      duration: 1.3\n    }, 0);\n    tl.to(this._hand.inner, {\n      opacity: 0,\n      duration: 1,\n      overwrite: true,\n      ease: 'power4.inOut'\n    }, 0);\n\n    // tl.to(this._card!.rotation.rotation, {\n    //   z: Math.PI / 36,\n    //   duration: 1,\n    //   ease: 'power4.inOut'\n    // }, 0.2);\n    // tl.to(this._card!.rotation.rotation, {\n    //   y: 0,\n    //   duration: 1,\n    //   ease: 'power4.inOut'\n    // }, 0.3);\n\n\n    tl.to(this._card!.rotation.rotation, {\n      z: 0,\n      y: 0,\n      duration: 1,\n      overwrite: true,\n      ease: 'power4.inOut'\n    }, 0.5);\n    tl.to(this._card!.animation.scale, {\n      x: 1.4,\n      y: 1.4,\n      z: 1.4,\n      duration: 1,\n      overwrite: true,\n      ease: \"power4.inOut\"\n    }, 0.4);\n    tl.to(this._card!.animation.position, {\n      y: 0.1,\n      duration: 1,\n      overwrite: true,\n      ease: \"power4.inOut\"\n    }, 0.4);\n\n\n    // flash\n    tl.to(this._flash!.material, {\n      opacity: 1,\n      duration: 1,\n      ease: \"power4.inOut\"\n    }, 0);\n    tl.to(this._flash!.mesh.position, {\n      y: 0.5,\n      duration: 1.2,\n      ease: \"power4.inOut\"\n    }, 0);\n\n    tl.to(this._flash!.material, {\n      opacity: 0,\n      duration: 1,\n      ease: \"power4.inOut\"\n    }, 1.5);\n    tl.to(this._flash!.mesh.position, {\n      y: -2,\n      duration: 1,\n      ease: \"power4.inOut\"\n    }, 1.5);\n\n\n\n    // stars\n    tl.to(this._stars!.material.uniforms.u_position, {\n      value: 1.2,\n      duration: 3,\n      ease: CustomEase.create(\"custom\", \"M0,0 C0.116,0.42 0.074,0.778 0.18,0.89 0.273,0.988 0.818,1.001 1,1 \")\n    }, 0.5);\n\n    tl.to(this._stars!.material.uniforms.u_opacity, {\n      value: 0.4,\n      duration: 0.5,\n      ease: 'power4.out'\n    }, 0.5);\n    tl.to(this._stars!.material.uniforms.u_opacity, {\n      value: 0,\n      duration: 1,\n      ease: 'power4.in'\n    }, 1.2);\n\n\n    tl.to(this._card!.animation.rotation, {\n      y: Math.PI * 2,\n      duration: 1,\n      overwrite: true,\n      ease: 'power4.out'\n    }, 2);\n\n    tl.to(this._card!.animation.scale, {\n      x: 3,\n      y: 3,\n      z: 3,\n      duration: 1,\n      ease: 'power4.out',\n      onStart: () => this._changeState(4)\n    }, 3);\n    tl.to(this._container, {\n      opacity: 0,\n      duration: 1,\n      ease: 'power4.out',\n    }, 3)\n\n\n    tl.add(() => this._changeState(5));\n  }\n\n\n\n  public destroy() {\n    this._isDestroyed = true;\n    this._draggable.kill();\n\n    this._container.removeChild(this._renderer.domElement);\n    this._container.removeChild(this._hand.el);\n    cancelAnimationFrame(this._raf);\n    // window.removeEventListener('mousemove', this._onMove);\n    window.removeEventListener('resize', this._onResize);\n  }\n  public set onStateChange(func: EventHandler | undefined) {\n    this._onStateChange = func || (() => {});\n\n    // if (this._isLoaded && func) func();\n  }\n\n\n\n  private _createHand() {\n    const el = document.createElement('div');\n    el.classList.add('card-box-hand');\n    const inner = document.createElement('div');\n    el.appendChild(inner);\n    inner.classList.add('card-box-hand-inner');\n    gsap.set(inner, {\n      y: 50,\n      x: 10,\n      opacity: 0\n    })\n    this._container.appendChild(el);\n    return {\n      el, inner\n    };\n  }\n  private _createDrag(container: HTMLDivElement) {\n    const draggable =  Draggable.create(document.createElement('div'), {\n      type: 'x',\n      trigger: container,\n      inertia: true,\n      edgeResistance: 0.8,\n      dragResistance: 0.5,\n      // velocity: 10000000,\n      resistance: 10000000,\n      snap: {\n        x: (value) => {\n          if (value < this._x * 0.2) {\n            return 0;\n          } else {\n            return this._x;\n          }\n        }\n      },\n      onDrag: () => this._onDrag(this._draggable.x),\n      onThrowUpdate: () => this._onDrag(this._draggable.x)\n    })[0];\n\n    draggable.disable();\n\n    return draggable;\n  }\n  private _createLights() {\n    const ambient = new AmbientLight( 0xFF7373, 0.3);\n    const point = new PointLight( 0xD0FFFF, 2.5, 32 , 1.2);\n    point.position.set(10, 5, 15);\n    const point2 = new PointLight( 0xD0FFFF, 2, 13, 2);\n    point2.position.set(6, 0, 10);\n\n    this._scene.add(ambient, point, point2);\n\n    return {ambient, point};\n  }\n\n  private async _load(cover: string) {\n    const mLoader = new GLTFLoader();\n    const tLoader = new TextureLoader();\n\n    const [map, normalMap, model, flashMap, cardBackMap, cardFrontMap] = await Promise.all([\n      tLoader.loadAsync(modelMapSource),\n      tLoader.loadAsync(modelNormalMapSource),\n      mLoader.loadAsync(modelSource),\n      tLoader.loadAsync(flashSource),\n      tLoader.loadAsync(cardBackSource),\n      tLoader.loadAsync(cover)\n    ]);\n\n    if (this._isDestroyed) return;\n\n    // model\n    this._model = getModel(model, map, normalMap);\n\n    // flash\n    this._flash = getFlash(flashMap)\n\n    // stars\n    this._stars = generateStars();\n\n    // card\n    this._card = getCard(cardBackMap, cardFrontMap);\n\n    this._scene.add(this._flash.mesh, this._stars.group);\n    this._globalGroup.add(this._model.animation, this._card.animation);\n\n    this._isLoaded = true;\n  }\n  private _resize() {\n    this._vw = window.innerWidth;\n    this._vh = window.innerHeight;\n    const heightCoeff = this._vh / 667;\n\n    this._container.style.width = this._vw + 'px';\n    this._container.style.height = this._vh + 'px';\n\n    this._renderer.setSize(this._vw, this._vh);\n\n    this._x = 261 * heightCoeff;\n    this._draggable.applyBounds({\n      minX: 0,\n      maxX: this._x\n    });\n    this._pos.y = -heightCoeff * 90;\n    this._pos.x = 118 * 2 * heightCoeff;\n\n    this._camera.aspect = this._vw / this._vh;\n    this._camera.updateProjectionMatrix();\n\n    this._updateHandPos(0);\n  }\n  private _tick() {\n    this._renderer.render(this._scene, this._camera);\n\n    // if (this._mixer) {\n    //   this._mixer.update()\n    // }\n\n    this._raf = requestAnimationFrame(this._tickHandler);\n  }\n\n  private _onDrag(x: number) {\n    if (this._state >= 3) return;\n    const {clip, mixer, action, rotation: modelRotation} = this._model!;\n    const {rotation: cardRotation} = this._card!;\n\n    let coeff = x / this._x;\n    let coeffDur = coeff;\n    coeffDur = Math.min(coeffDur, 0.99);\n    coeffDur = Math.max(coeffDur, 0);\n\n    mixer.setTime(coeffDur * clip.duration);\n    modelRotation.rotation.y = coeffDur * (Math.PI / 12);\n    cardRotation.rotation.y = coeffDur * (Math.PI / 12);\n\n    let coeffPos = coeff * 2;\n    coeffPos = Math.min(coeffPos, 1);\n    this._updateHandPos(coeffPos);\n\n    if (coeffPos >= 0.99) {\n      this._animateDragEnd();\n    }\n  }\n  private _updateHandPos(coeff: number) {\n    coeff = coeff - 0.5;\n    this._hand.el.style.transform = `translate3d(${this._pos.x * coeff}px, ${this._pos.y}px, 0) rotate(${coeff * 15}deg)`;\n  }\n\n  // private _move(e: MouseEvent)  {\n  //   const pos = (e.clientX - this._vw / 2) / this._vw;\n  //\n  //   this._globalGroup.rotation.y = Math.PI * pos * 2\n  // }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}